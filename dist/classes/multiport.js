export default class Multiport {
    ports = [];
    constructor(ns, start, end) {
        for (let i = start; i <= end; i++) {
            this.ports.push(ns.getPortHandle(i));
        }
    }
    write(data, portPredicate = (_, __) => true) {
        const parsed = typeof data == "string" ? data : JSON.stringify(data);
        for (let i = 0; this.ports[i] != undefined; i++) {
            if (!this.ports[i].full() && portPredicate(i, this.ports[i])) {
                this.ports[i].write(parsed);
                break;
            }
        }
    }
    clear() {
        for (const port of this.ports)
            port.clear();
    }
    empty() {
        for (const port of this.ports)
            if (!port.empty())
                return false;
        return true;
    }
    hasItems() {
        for (const port of this.ports)
            if (port.empty())
                return false;
        return false;
    }
    full() {
        for (const port of this.ports)
            if (!port.full())
                return false;
        return true;
    }
    peek(predicate = () => true) {
        for (const port of this.ports) {
            if (port.peek() != "NULL PORT DATA" && predicate(port.peek()))
                return port.peek();
        }
        return null;
    }
    read(predicate = () => true) {
        for (const port of this.ports) {
            if (port.peek() != "NULL PORT DATA" && predicate(port.peek()))
                return port.read();
        }
        return null;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGlwb3J0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NsYXNzZXMvbXVsdGlwb3J0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sQ0FBQyxPQUFPLE9BQU8sU0FBUztJQUMxQixLQUFLLEdBQXVCLEVBQUUsQ0FBQztJQUMvQixZQUFZLEVBQVMsRUFBRSxLQUFhLEVBQUUsR0FBVztRQUM3QyxLQUFLLElBQUksQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN4QztJQUNMLENBQUM7SUFFRCxLQUFLLENBQUMsSUFBUyxFQUFFLGdCQUFzRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUk7UUFDbEcsTUFBTSxNQUFNLEdBQUcsT0FBTyxJQUFJLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksYUFBYSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQzFELElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUM1QixNQUFNO2FBQ1Q7U0FDSjtJQUNMLENBQUM7SUFFRCxLQUFLO1FBQ0QsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSztZQUN6QixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELEtBQUs7UUFDRCxLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO2dCQUNiLE9BQU8sS0FBSyxDQUFDO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxRQUFRO1FBQ0osS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSztZQUN6QixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ1osT0FBTyxLQUFLLENBQUM7UUFDckIsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELElBQUk7UUFDQSxLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNaLE9BQU8sS0FBSyxDQUFDO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxJQUFJLENBQUMsWUFBb0MsR0FBRyxFQUFFLENBQUMsSUFBSTtRQUMvQyxLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDM0IsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksZ0JBQWdCLElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDekQsT0FBTyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDMUI7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsSUFBSSxDQUFDLFlBQW9DLEdBQUcsRUFBRSxDQUFDLElBQUk7UUFDL0MsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQzNCLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLGdCQUFnQixJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ3pELE9BQU8sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQzFCO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5zIGZyb20gXCJAbnNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNdWx0aXBvcnQge1xuICAgIHBvcnRzOiBucy5OZXRzY3JpcHRQb3J0W10gPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihuczogbnMuTlMsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5wb3J0cy5wdXNoKG5zLmdldFBvcnRIYW5kbGUoaSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgd3JpdGUoZGF0YTogYW55LCBwb3J0UHJlZGljYXRlOiAocG9ydE51bTogbnVtYmVyLCBwb3J0OiBucy5OZXRzY3JpcHRQb3J0KSA9PiBib29sZWFuID0gKF8sIF9fKSA9PiB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHR5cGVvZiBkYXRhID09IFwic3RyaW5nXCIgPyBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyB0aGlzLnBvcnRzW2ldICE9IHVuZGVmaW5lZDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucG9ydHNbaV0uZnVsbCgpICYmIHBvcnRQcmVkaWNhdGUoaSwgdGhpcy5wb3J0c1tpXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcnRzW2ldLndyaXRlKHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgZm9yIChjb25zdCBwb3J0IG9mIHRoaXMucG9ydHMpXG4gICAgICAgICAgICBwb3J0LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgZW1wdHkoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcG9ydCBvZiB0aGlzLnBvcnRzKSBcbiAgICAgICAgICAgIGlmICghcG9ydC5lbXB0eSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaGFzSXRlbXMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcG9ydCBvZiB0aGlzLnBvcnRzKSBcbiAgICAgICAgICAgIGlmIChwb3J0LmVtcHR5KCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVsbCgpIHtcbiAgICAgICAgZm9yIChjb25zdCBwb3J0IG9mIHRoaXMucG9ydHMpXG4gICAgICAgICAgICBpZiAoIXBvcnQuZnVsbCgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcGVlayhwcmVkaWNhdGU6IChkYXRhOiBhbnkpID0+IGJvb2xlYW4gPSAoKSA9PiB0cnVlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcG9ydCBvZiB0aGlzLnBvcnRzKSB7XG4gICAgICAgICAgICBpZiAocG9ydC5wZWVrKCkgIT0gXCJOVUxMIFBPUlQgREFUQVwiICYmIHByZWRpY2F0ZShwb3J0LnBlZWsoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcnQucGVlaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJlYWQocHJlZGljYXRlOiAoZGF0YTogYW55KSA9PiBib29sZWFuID0gKCkgPT4gdHJ1ZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBvcnQgb2YgdGhpcy5wb3J0cykge1xuICAgICAgICAgICAgaWYgKHBvcnQucGVlaygpICE9IFwiTlVMTCBQT1JUIERBVEFcIiAmJiBwcmVkaWNhdGUocG9ydC5wZWVrKCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBwb3J0LnJlYWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59Il19