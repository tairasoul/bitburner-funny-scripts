import { decompressLZ } from "/cct/decompressLZ";
import { getCCT } from "/cct/findCct";
import { minJumps } from "/cct/jump";
import { largestPrimeFactor } from "/cct/largestPrimeFactor";
import { maxProfit } from "/cct/maxProfit";
import { maxSubarraySum } from "/cct/maxSubarraySum";
import { sanitizeParentheses } from "/cct/parenthesesSanitize";
import { RLE } from "/cct/RLE";
import { twoColorGraph } from "/cct/twoColourGraph";
import { uniquePaths } from "/cct/uniquePaths";
import { totalSums, totalSums2 } from "/cct/totalSums";
import { vignere } from "/cct/vignere";
import { generateIPAddresses } from "/cct/generateIPAddresses";
import { mergeInterval } from "/cct/mergeInterval";
import { triangle } from "/cct/triangle";
import { caesar } from "/cct/caesar";
import { compressLZ } from "/cct/compressLZ";
import { findValid } from "/cct/findvalid";
import { HammingCodes_to_int } from "/cct/hammingcodes-encoded-to-int";
import { HammingCodes_to_encoded } from "/cct/hammingcodes-int-to-encoded";
import { SpiralizeMatrix } from "/cct/spiralize_matrix";
import { ShortestPath } from "/cct/shortest_path";
import Logs from "/general/logs";
function getAll(ns, contract, host) {
    return {
        type: ns.codingcontract.getContractType(contract, host),
        data: ns.codingcontract.getData(contract, host),
        description: ns.codingcontract.getDescription(contract, host)
    };
}
function createGrid(numRows, numCols) {
    const array = [];
    for (let i = 0; i < numRows; i++) {
        array.push(new Array(numCols).fill(0));
    }
    return array;
}
export async function solveCCT(ns) {
    const logger = new Logs(ns, "CCTSolver");
    ns.disableLog("ALL");
    const cct = getCCT(ns);
    if (cct != null) {
        const contract = getAll(ns, cct.cct, cct.hostname);
        if (contract.type.includes("Array Jumping Game")) {
            const output = ns.codingcontract.attempt(minJumps(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Subarray with Maximum Sum") {
            const output = ns.codingcontract.attempt(maxSubarraySum(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Proper 2-Coloring of a Graph") {
            const output = ns.codingcontract.attempt(twoColorGraph(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Compression I")) {
            const output = ns.codingcontract.attempt(RLE(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Compression II: LZ Decompression") {
            const output = ns.codingcontract.attempt(decompressLZ(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Find Largest Prime Factor") {
            const output = ns.codingcontract.attempt(largestPrimeFactor(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Unique Paths in a Grid I") {
            const output = ns.codingcontract.attempt(uniquePaths(createGrid(contract.data[0], contract.data[1])), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Unique Paths in a Grid II") {
            const output = ns.codingcontract.attempt(uniquePaths(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Total Ways to Sum")) {
            const output = ns.codingcontract.attempt(contract.type.endsWith("II") ? totalSums2(contract.data) : totalSums(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.includes("Algorithmic Stock Trader") && !contract.type.endsWith("IV")) {
            const map = {
                "one": 1,
                "two": 2,
                "three": 3,
                "four": 4,
                "five": 5,
                "six": 6,
                "seven": 7
            };
            const maxTransactions = map[contract.description.split(" ").find((v) => Object.keys(map).includes(v))];
            const output = ns.codingcontract.attempt(maxProfit(maxTransactions, contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.includes("Algorithmic Stock Trader") && contract.type.endsWith("IV")) {
            const output = ns.codingcontract.attempt(maxProfit(contract.data[0], contract.data[1]), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Encryption II")) {
            const output = ns.codingcontract.attempt(vignere(contract.data[0], contract.data[1]), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Generate IP Addresses") {
            const output = ns.codingcontract.attempt(generateIPAddresses(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Merge Overlapping Intervals") {
            const output = ns.codingcontract.attempt(mergeInterval(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Minimum Path Sum in a Triangle") {
            const output = ns.codingcontract.attempt(triangle(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Sanitize Parentheses in Expression") {
            const output = ns.codingcontract.attempt(sanitizeParentheses(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Encryption I")) {
            const output = ns.codingcontract.attempt(caesar(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Compression III")) {
            const output = ns.codingcontract.attempt(compressLZ(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Find All Valid Math Expressions") {
            const output = ns.codingcontract.attempt(findValid(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "HammingCodes: Integer to Encoded Binary") {
            const output = ns.codingcontract.attempt(HammingCodes_to_encoded(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "HammingCodes: Encoded Binary to Integer") {
            const output = ns.codingcontract.attempt(HammingCodes_to_int(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Shortest Path in a Grid") {
            const output = ns.codingcontract.attempt(ShortestPath(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Spiralize Matrix") {
            const output = ns.codingcontract.attempt(SpiralizeMatrix(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29sdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NjdC9zb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDdEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNyQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM3RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUMvQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDdkMsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDL0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDekMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUNyQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFB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LGVBQWUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDaEcsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7S0FDSjtJQUNELE9BQU8sS0FBSyxDQUFBO0FBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOUyB9IGZyb20gXCJAbnNcIjtcbmltcG9ydCB7IGRlY29tcHJlc3NMWiB9IGZyb20gXCIvY2N0L2RlY29tcHJlc3NMWlwiO1xuaW1wb3J0IHsgZ2V0Q0NUIH0gZnJvbSBcIi9jY3QvZmluZENjdFwiO1xuaW1wb3J0IHsgbWluSnVtcHMgfSBmcm9tIFwiL2NjdC9qdW1wXCI7XG5pbXBvcnQgeyBsYXJnZXN0UHJpbWVGYWN0b3IgfSBmcm9tIFwiL2NjdC9sYXJnZXN0UHJpbWVGYWN0b3JcIjtcbmltcG9ydCB7IG1heFByb2ZpdCB9IGZyb20gXCIvY2N0L21heFByb2ZpdFwiO1xuaW1wb3J0IHsgbWF4U3ViYXJyYXlTdW0gfSBmcm9tIFwiL2NjdC9tYXhTdWJhcnJheVN1bVwiO1xuaW1wb3J0IHsgc2FuaXRpemVQYXJlbnRoZXNlcyB9IGZyb20gXCIvY2N0L3BhcmVudGhlc2VzU2FuaXRpemVcIjtcbmltcG9ydCB7IFJMRSB9IGZyb20gXCIvY2N0L1JMRVwiO1xuaW1wb3J0IHsgdHdvQ29sb3JHcmFwaCB9IGZyb20gXCIvY2N0L3R3b0NvbG91ckdyYXBoXCI7XG5pbXBvcnQgeyB1bmlxdWVQYXRocyB9IGZyb20gXCIvY2N0L3VuaXF1ZVBhdGhzXCI7XG5pbXBvcnQgeyB0b3RhbFN1bXMsIHRvdGFsU3VtczIgfSBmcm9tIFwiL2NjdC90b3RhbFN1bXNcIjtcbmltcG9ydCB7IHZpZ25lcmUgfSBmcm9tIFwiL2NjdC92aWduZXJlXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlQQWRkcmVzc2VzIH0gZnJvbSBcIi9jY3QvZ2VuZXJhdGVJUEFkZHJlc3Nlc1wiO1xuaW1wb3J0IHsgbWVyZ2VJbnRlcnZhbCB9IGZyb20gXCIvY2N0L21lcmdlSW50ZXJ2YWxcIjtcbmltcG9ydCB7IHRyaWFuZ2xlIH0gZnJvbSBcIi9jY3QvdHJpYW5nbGVcIjtcbmltcG9ydCB7IGNhZXNhciB9IGZyb20gXCIvY2N0L2NhZXNhclwiO1xuaW1wb3J0IHsgY29tcHJlc3NMWiB9IGZyb20gXCIvY2N0L2NvbXByZXNzTFpcIjtcbmltcG9ydCB7IGZpbmRWYWxpZCB9IGZyb20gXCIvY2N0L2ZpbmR2YWxpZFwiO1xuaW1wb3J0IHsgSGFtbWluZ0NvZGVzX3RvX2ludCB9IGZyb20gXCIvY2N0L2hhbW1pbmdjb2Rlcy1lbmNvZGVkLXRvLWludFwiO1xuaW1wb3J0IHsgSGFtbWluZ0NvZGVzX3RvX2VuY29kZWQgfSBmcm9tIFwiL2NjdC9oYW1taW5nY29kZXMtaW50LXRvLWVuY29kZWRcIlxuaW1wb3J0IHsgU3BpcmFsaXplTWF0cml4IH0gZnJvbSBcIi9jY3Qvc3BpcmFsaXplX21hdHJpeFwiO1xuaW1wb3J0IHsgU2hvcnRlc3RQYXRoIH0gZnJvbSBcIi9jY3Qvc2hvcnRlc3RfcGF0aFwiO1xuaW1wb3J0IExvZ3MgZnJvbSBcIi9nZW5lcmFsL2xvZ3NcIjtcblxuZnVuY3Rpb24gZ2V0QWxsKG5zOiBOUywgY29udHJhY3Q6IHN0cmluZywgaG9zdDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogbnMuY29kaW5nY29udHJhY3QuZ2V0Q29udHJhY3RUeXBlKGNvbnRyYWN0LCBob3N0KSxcbiAgICAgICAgZGF0YTogbnMuY29kaW5nY29udHJhY3QuZ2V0RGF0YShjb250cmFjdCwgaG9zdCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiBucy5jb2Rpbmdjb250cmFjdC5nZXREZXNjcmlwdGlvbihjb250cmFjdCwgaG9zdClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyaWQobnVtUm93czogbnVtYmVyLCBudW1Db2xzOiBudW1iZXIpIHtcbiAgICBjb25zdCBhcnJheTogbnVtYmVyW11bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Sb3dzOyBpKyspIHtcbiAgICAgICAgYXJyYXkucHVzaChuZXcgQXJyYXkobnVtQ29scykuZmlsbCgwKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNvbHZlQ0NUKG5zOiBOUykge1xuICAgIGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dzKG5zLCBcIkNDVFNvbHZlclwiKTtcbiAgICBucy5kaXNhYmxlTG9nKFwiQUxMXCIpO1xuICAgIGNvbnN0IGNjdCA9IGdldENDVChucyk7XG4gICAgaWYgKGNjdCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyYWN0ID0gZ2V0QWxsKG5zLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5pbmNsdWRlcyhcIkFycmF5IEp1bXBpbmcgR2FtZVwiKSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChtaW5KdW1wcyhjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlN1YmFycmF5IHdpdGggTWF4aW11bSBTdW1cIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChtYXhTdWJhcnJheVN1bShjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlByb3BlciAyLUNvbG9yaW5nIG9mIGEgR3JhcGhcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdCh0d29Db2xvckdyYXBoKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLnN0YXJ0c1dpdGgoXCJDb21wcmVzc2lvbiBJXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KFJMRShjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIkNvbXByZXNzaW9uIElJOiBMWiBEZWNvbXByZXNzaW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoZGVjb21wcmVzc0xaKGNvbnRyYWN0LmRhdGEpIGFzIHN0cmluZywgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIkZpbmQgTGFyZ2VzdCBQcmltZSBGYWN0b3JcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChsYXJnZXN0UHJpbWVGYWN0b3IoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJVbmlxdWUgUGF0aHMgaW4gYSBHcmlkIElcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdCh1bmlxdWVQYXRocyhjcmVhdGVHcmlkKGNvbnRyYWN0LmRhdGFbMF0sIGNvbnRyYWN0LmRhdGFbMV0pKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlVuaXF1ZSBQYXRocyBpbiBhIEdyaWQgSUlcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdCh1bmlxdWVQYXRocyhjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5zdGFydHNXaXRoKFwiVG90YWwgV2F5cyB0byBTdW1cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoY29udHJhY3QudHlwZS5lbmRzV2l0aChcIklJXCIpID8gdG90YWxTdW1zMihjb250cmFjdC5kYXRhKSA6IHRvdGFsU3Vtcyhjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5pbmNsdWRlcyhcIkFsZ29yaXRobWljIFN0b2NrIFRyYWRlclwiKSAmJiAhY29udHJhY3QudHlwZS5lbmRzV2l0aChcIklWXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXAgPSB7XG4gICAgICAgICAgICAgICAgXCJvbmVcIjogMSxcbiAgICAgICAgICAgICAgICBcInR3b1wiOiAyLFxuICAgICAgICAgICAgICAgIFwidGhyZWVcIjogMyxcbiAgICAgICAgICAgICAgICBcImZvdXJcIjogNCxcbiAgICAgICAgICAgICAgICBcImZpdmVcIjogNSxcbiAgICAgICAgICAgICAgICBcInNpeFwiOiA2LFxuICAgICAgICAgICAgICAgIFwic2V2ZW5cIjogN1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWF4VHJhbnNhY3Rpb25zID0gbWFwW2NvbnRyYWN0LmRlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKS5maW5kKCh2KSA9PiBPYmplY3Qua2V5cyhtYXApLmluY2x1ZGVzKHYpKSBhcyBcIm9uZVwiXTtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQobWF4UHJvZml0KG1heFRyYW5zYWN0aW9ucywgY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUuaW5jbHVkZXMoXCJBbGdvcml0aG1pYyBTdG9jayBUcmFkZXJcIikgJiYgY29udHJhY3QudHlwZS5lbmRzV2l0aChcIklWXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KG1heFByb2ZpdChjb250cmFjdC5kYXRhWzBdLCBjb250cmFjdC5kYXRhWzFdKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5zdGFydHNXaXRoKFwiRW5jcnlwdGlvbiBJSVwiKSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdCh2aWduZXJlKGNvbnRyYWN0LmRhdGFbMF0sIGNvbnRyYWN0LmRhdGFbMV0pLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiR2VuZXJhdGUgSVAgQWRkcmVzc2VzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoZ2VuZXJhdGVJUEFkZHJlc3Nlcyhjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIk1lcmdlIE92ZXJsYXBwaW5nIEludGVydmFsc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KG1lcmdlSW50ZXJ2YWwoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJNaW5pbXVtIFBhdGggU3VtIGluIGEgVHJpYW5nbGVcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdCh0cmlhbmdsZShjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlNhbml0aXplIFBhcmVudGhlc2VzIGluIEV4cHJlc3Npb25cIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChzYW5pdGl6ZVBhcmVudGhlc2VzKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLnN0YXJ0c1dpdGgoXCJFbmNyeXB0aW9uIElcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoY2Flc2FyKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLnN0YXJ0c1dpdGgoXCJDb21wcmVzc2lvbiBJSUlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoY29tcHJlc3NMWihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIkZpbmQgQWxsIFZhbGlkIE1hdGggRXhwcmVzc2lvbnNcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChmaW5kVmFsaWQoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJIYW1taW5nQ29kZXM6IEludGVnZXIgdG8gRW5jb2RlZCBCaW5hcnlcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChIYW1taW5nQ29kZXNfdG9fZW5jb2RlZChjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIkhhbW1pbmdDb2RlczogRW5jb2RlZCBCaW5hcnkgdG8gSW50ZWdlclwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KEhhbW1pbmdDb2Rlc190b19pbnQoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJTaG9ydGVzdCBQYXRoIGluIGEgR3JpZFwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KFNob3J0ZXN0UGF0aChjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlNwaXJhbGl6ZSBNYXRyaXhcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChTcGlyYWxpemVNYXRyaXgoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG59Il19