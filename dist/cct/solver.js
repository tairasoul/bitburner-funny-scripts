import { decompressLZ } from "/cct/decompressLZ";
import { getCCT } from "/cct/findCct";
import { minJumps } from "/cct/jump";
import { largestPrimeFactor } from "/cct/largestPrimeFactor";
import * as stocks from "/cct/stockTrader";
import { maxSubarraySum } from "/cct/maxSubarraySum";
import { sanitizeParentheses } from "/cct/parenthesesSanitize";
import { RLE } from "/cct/RLE";
import { twoColorGraph } from "/cct/twoColourGraph";
import { uniquePaths } from "/cct/uniquePaths";
import { totalSums, totalSums2 } from "/cct/totalSums";
import { vignere } from "/cct/vignere";
import { generateIPAddresses } from "/cct/generateIPAddresses";
import { mergeInterval } from "/cct/mergeInterval";
import { triangle } from "/cct/triangle";
import { caesar } from "/cct/caesar";
import { compressLZ } from "/cct/compressLZ";
import { findValid } from "/cct/findvalid";
import { HammingCodes_to_int } from "/cct/hammingcodes-encoded-to-int";
import { HammingCodes_to_encoded } from "/cct/hammingcodes-int-to-encoded";
import { SpiralizeMatrix } from "/cct/spiralize_matrix";
import { ShortestPath } from "/cct/shortest_path";
function getAll(ns, contract, host) {
    return {
        type: ns.codingcontract.getContractType(contract, host),
        data: ns.codingcontract.getData(contract, host),
        description: ns.codingcontract.getDescription(contract, host)
    };
}
function createGrid(numRows, numCols) {
    const array = [];
    for (let i = 0; i < numRows; i++) {
        array.push(new Array(numCols).fill(0));
    }
    return array;
}
export async function solveCCT(ns, logger) {
    ns.disableLog("ALL");
    const cct = getCCT(ns);
    if (cct != null) {
        const contract = getAll(ns, cct.cct, cct.hostname);
        if (contract.type.includes("Array Jumping Game")) {
            const output = ns.codingcontract.attempt(minJumps(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Subarray with Maximum Sum") {
            const output = ns.codingcontract.attempt(maxSubarraySum(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Proper 2-Coloring of a Graph") {
            const output = ns.codingcontract.attempt(twoColorGraph(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Compression I")) {
            const output = ns.codingcontract.attempt(RLE(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Compression II: LZ Decompression") {
            const output = ns.codingcontract.attempt(decompressLZ(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Find Largest Prime Factor") {
            const output = ns.codingcontract.attempt(largestPrimeFactor(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Unique Paths in a Grid I") {
            const output = ns.codingcontract.attempt(uniquePaths(createGrid(contract.data[0], contract.data[1])), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Unique Paths in a Grid II") {
            const output = ns.codingcontract.attempt(uniquePaths(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Total Ways to Sum")) {
            const output = ns.codingcontract.attempt(contract.type.endsWith("II") ? totalSums2(contract.data) : totalSums(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.includes("Algorithmic Stock Trader")) {
            const type = contract.type.split(" ")[3];
            switch (type) {
                case "I":
                    const output = ns.codingcontract.attempt(stocks.stock1(contract.data), cct.cct, cct.hostname);
                    if (output == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output);
                    }
                    return true;
                case "II":
                    const output2 = ns.codingcontract.attempt(stocks.stock2(contract.data), cct.cct, cct.hostname);
                    if (output2 == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output2);
                    }
                    return true;
                case "III":
                    const output3 = ns.codingcontract.attempt(stocks.stock3(contract.data), cct.cct, cct.hostname);
                    if (output3 == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output3);
                    }
                    return true;
                case "IV":
                    const output4 = ns.codingcontract.attempt(stocks.stock4(contract.data), cct.cct, cct.hostname);
                    if (output4 == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output4);
                    }
                    return true;
            }
        }
        if (contract.type.startsWith("Encryption II")) {
            const output = ns.codingcontract.attempt(vignere(contract.data[0], contract.data[1]), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Generate IP Addresses") {
            const output = ns.codingcontract.attempt(generateIPAddresses(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Merge Overlapping Intervals") {
            const output = ns.codingcontract.attempt(mergeInterval(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Minimum Path Sum in a Triangle") {
            const output = ns.codingcontract.attempt(triangle(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Sanitize Parentheses in Expression") {
            const output = ns.codingcontract.attempt(sanitizeParentheses(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Encryption I")) {
            const output = ns.codingcontract.attempt(caesar(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Compression III")) {
            const output = ns.codingcontract.attempt(compressLZ(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Find All Valid Math Expressions") {
            const output = ns.codingcontract.attempt(findValid(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "HammingCodes: Integer to Encoded Binary") {
            const output = ns.codingcontract.attempt(HammingCodes_to_encoded(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "HammingCodes: Encoded Binary to Integer") {
            const output = ns.codingcontract.attempt(HammingCodes_to_int(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Shortest Path in a Grid") {
            const output = ns.codingcontract.attempt(ShortestPath(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Spiralize Matrix") {
            const output = ns.codingcontract.attempt(SpiralizeMatrix(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29sdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NjdC9zb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDdEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNyQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM3RCxPQUFPLEtBQUssTUFBTSxNQUFNLGtCQUFrQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMvRCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQy9CLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDL0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDckMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN2RSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQTtBQUMxRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBR2xELFNBQVMsTUFBTSxDQUFDLEVBQU0sRUFBRSxRQUFnQixFQUFFLElBQVk7SUFDbEQsT0FBTztRQUNILElBQUksRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO1FBQ3ZELElBQUksRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO1FBQy9DLFdBQVcsRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDO0tBQ2hFLENBQUE7QUFDTCxDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsT0FBZSxFQUFFLE9BQWU7SUFDaEQsTUFBTSxLQUFLLEdBQWUsRUFBRSxDQUFDO0lBRTdCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDOUIsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUMxQztJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFFRCxNQUFNLENBQUMsS0FBSyxVQUFVLFFBQVEsQ0FBQyxFQUFNLEVBQUUsTUFBWTtJQUMvQyxFQUFFLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN2QixJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUU7UUFDYixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ25ELElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUM5QyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pGLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtnQkFDZCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQzthQUN4RztpQkFDSTtnQkFDRCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDNUI7WUFDRCxPQUFPLElBQUksQ0FBQztTQUNmO1FBQ0QsSUFBSSxRQUFRLENBQUMsSUFBSSxJQUFJLDJCQUEyQixFQUFFO1lBQzlDLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDL0YsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksOEJBQThCLEVBQUU7WUFDakQsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5RixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFDM0MsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNwRixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxrQ0FBa0MsRUFBRTtZQUNyRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBVyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZHLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtnQkFDZCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQzthQUN4RztpQkFDSTtnQkFDRCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDNUI7WUFDRCxPQUFPLElBQUksQ0FBQztTQUNmO1FBQ0QsSUFBSSxRQUFRLENBQUMsSUFBSSxJQUFJLDJCQUEyQixFQUFFO1lBQzlDLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNuRyxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksSUFBSSwwQkFBMEIsRUFBRTtZQUM3QyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0gsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksMkJBQTJCLEVBQUU7WUFDOUMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM1RixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUMvQyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNySixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsMEJBQTBCLENBQUMsRUFBRTtZQUNwRCxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6QyxRQUFRLElBQUksRUFBRTtnQkFDVixLQUFLLEdBQUc7b0JBQ0osTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQzlGLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTt3QkFDZCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztxQkFDeEc7eUJBQ0k7d0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUM1QjtvQkFDRCxPQUFPLElBQUksQ0FBQztnQkFDaEIsS0FBSyxJQUFJO29CQUNMLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUMvRixJQUFJLE9BQU8sSUFBSSxFQUFFLEVBQUU7d0JBQ2YsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7cUJBQ3hHO3lCQUNJO3dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztxQkFDN0I7b0JBQ0QsT0FBTyxJQUFJLENBQUM7Z0JBQ2hCLEtBQUssS0FBSztvQkFDTixNQUFNLE9BQU8sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDL0YsSUFBSSxPQUFPLElBQUksRUFBRSxFQUFFO3dCQUNmLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO3FCQUN4Rzt5QkFDSTt3QkFDRCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7cUJBQzdCO29CQUNELE9BQU8sSUFBSSxDQUFDO2dCQUNoQixLQUFLLElBQUk7b0JBQ0wsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQy9GLElBQUksT0FBTyxJQUFJLEVBQUUsRUFBRTt3QkFDZixNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztxQkFDeEc7eUJBQ0k7d0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUM3QjtvQkFDRCxPQUFPLElBQUksQ0FBQzthQUNuQjtTQUNKO1FBQ0QsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMzQyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0csSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksdUJBQXVCLEVBQUU7WUFDMUMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BHLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtnQkFDZCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQzthQUN4RztpQkFDSTtnQkFDRCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDNUI7WUFDRCxPQUFPLElBQUksQ0FBQztTQUNmO1FBQ0QsSUFBSSxRQUFRLENBQUMsSUFBSSxJQUFJLDZCQUE2QixFQUFFO1lBQ2hELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDOUYsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksZ0NBQWdDLEVBQUU7WUFDbkQsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6RixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxvQ0FBb0MsRUFBRTtZQUN2RCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEcsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQzFDLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdkYsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDN0MsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzRixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxpQ0FBaUMsRUFBRTtZQUNwRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFGLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtnQkFDZCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQzthQUN4RztpQkFDSTtnQkFDRCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDNUI7WUFDRCxPQUFPLElBQUksQ0FBQztTQUNmO1FBQ0QsSUFBSSxRQUFRLENBQUMsSUFBSSxJQUFJLHlDQUF5QyxFQUFFO1lBQzVELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN4RyxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksSUFBSSx5Q0FBeUMsRUFBRTtZQUM1RCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEcsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUkseUJBQXlCLEVBQUU7WUFDNUMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM3RixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxrQkFBa0IsRUFBRTtZQUNyQyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2hHLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtnQkFDZCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQzthQUN4RztpQkFDSTtnQkFDRCxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDNUI7WUFDRCxPQUFPLElBQUksQ0FBQztTQUNmO0tBQ0o7SUFDRCxPQUFPLEtBQUssQ0FBQTtBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTlMgfSBmcm9tIFwiQG5zXCI7XG5pbXBvcnQgeyBkZWNvbXByZXNzTFogfSBmcm9tIFwiL2NjdC9kZWNvbXByZXNzTFpcIjtcbmltcG9ydCB7IGdldENDVCB9IGZyb20gXCIvY2N0L2ZpbmRDY3RcIjtcbmltcG9ydCB7IG1pbkp1bXBzIH0gZnJvbSBcIi9jY3QvanVtcFwiO1xuaW1wb3J0IHsgbGFyZ2VzdFByaW1lRmFjdG9yIH0gZnJvbSBcIi9jY3QvbGFyZ2VzdFByaW1lRmFjdG9yXCI7XG5pbXBvcnQgKiBhcyBzdG9ja3MgZnJvbSBcIi9jY3Qvc3RvY2tUcmFkZXJcIjtcbmltcG9ydCB7IG1heFN1YmFycmF5U3VtIH0gZnJvbSBcIi9jY3QvbWF4U3ViYXJyYXlTdW1cIjtcbmltcG9ydCB7IHNhbml0aXplUGFyZW50aGVzZXMgfSBmcm9tIFwiL2NjdC9wYXJlbnRoZXNlc1Nhbml0aXplXCI7XG5pbXBvcnQgeyBSTEUgfSBmcm9tIFwiL2NjdC9STEVcIjtcbmltcG9ydCB7IHR3b0NvbG9yR3JhcGggfSBmcm9tIFwiL2NjdC90d29Db2xvdXJHcmFwaFwiO1xuaW1wb3J0IHsgdW5pcXVlUGF0aHMgfSBmcm9tIFwiL2NjdC91bmlxdWVQYXRoc1wiO1xuaW1wb3J0IHsgdG90YWxTdW1zLCB0b3RhbFN1bXMyIH0gZnJvbSBcIi9jY3QvdG90YWxTdW1zXCI7XG5pbXBvcnQgeyB2aWduZXJlIH0gZnJvbSBcIi9jY3QvdmlnbmVyZVwiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJUEFkZHJlc3NlcyB9IGZyb20gXCIvY2N0L2dlbmVyYXRlSVBBZGRyZXNzZXNcIjtcbmltcG9ydCB7IG1lcmdlSW50ZXJ2YWwgfSBmcm9tIFwiL2NjdC9tZXJnZUludGVydmFsXCI7XG5pbXBvcnQgeyB0cmlhbmdsZSB9IGZyb20gXCIvY2N0L3RyaWFuZ2xlXCI7XG5pbXBvcnQgeyBjYWVzYXIgfSBmcm9tIFwiL2NjdC9jYWVzYXJcIjtcbmltcG9ydCB7IGNvbXByZXNzTFogfSBmcm9tIFwiL2NjdC9jb21wcmVzc0xaXCI7XG5pbXBvcnQgeyBmaW5kVmFsaWQgfSBmcm9tIFwiL2NjdC9maW5kdmFsaWRcIjtcbmltcG9ydCB7IEhhbW1pbmdDb2Rlc190b19pbnQgfSBmcm9tIFwiL2NjdC9oYW1taW5nY29kZXMtZW5jb2RlZC10by1pbnRcIjtcbmltcG9ydCB7IEhhbW1pbmdDb2Rlc190b19lbmNvZGVkIH0gZnJvbSBcIi9jY3QvaGFtbWluZ2NvZGVzLWludC10by1lbmNvZGVkXCJcbmltcG9ydCB7IFNwaXJhbGl6ZU1hdHJpeCB9IGZyb20gXCIvY2N0L3NwaXJhbGl6ZV9tYXRyaXhcIjtcbmltcG9ydCB7IFNob3J0ZXN0UGF0aCB9IGZyb20gXCIvY2N0L3Nob3J0ZXN0X3BhdGhcIjtcbmltcG9ydCBMb2dzIGZyb20gXCIvZ2VuZXJhbC9sb2dzXCI7XG5cbmZ1bmN0aW9uIGdldEFsbChuczogTlMsIGNvbnRyYWN0OiBzdHJpbmcsIGhvc3Q6IHN0cmluZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IG5zLmNvZGluZ2NvbnRyYWN0LmdldENvbnRyYWN0VHlwZShjb250cmFjdCwgaG9zdCksXG4gICAgICAgIGRhdGE6IG5zLmNvZGluZ2NvbnRyYWN0LmdldERhdGEoY29udHJhY3QsIGhvc3QpLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnMuY29kaW5nY29udHJhY3QuZ2V0RGVzY3JpcHRpb24oY29udHJhY3QsIGhvc3QpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmlkKG51bVJvd3M6IG51bWJlciwgbnVtQ29sczogbnVtYmVyKSB7XG4gICAgY29uc3QgYXJyYXk6IG51bWJlcltdW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtUm93czsgaSsrKSB7XG4gICAgICAgIGFycmF5LnB1c2gobmV3IEFycmF5KG51bUNvbHMpLmZpbGwoMCkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzb2x2ZUNDVChuczogTlMsIGxvZ2dlcjogTG9ncykge1xuICAgIG5zLmRpc2FibGVMb2coXCJBTExcIik7XG4gICAgY29uc3QgY2N0ID0gZ2V0Q0NUKG5zKTtcbiAgICBpZiAoY2N0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgY29udHJhY3QgPSBnZXRBbGwobnMsIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLmluY2x1ZGVzKFwiQXJyYXkgSnVtcGluZyBHYW1lXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KG1pbkp1bXBzKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiU3ViYXJyYXkgd2l0aCBNYXhpbXVtIFN1bVwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KG1heFN1YmFycmF5U3VtKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiUHJvcGVyIDItQ29sb3Jpbmcgb2YgYSBHcmFwaFwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHR3b0NvbG9yR3JhcGgoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUuc3RhcnRzV2l0aChcIkNvbXByZXNzaW9uIElcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoUkxFKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiQ29tcHJlc3Npb24gSUk6IExaIERlY29tcHJlc3Npb25cIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChkZWNvbXByZXNzTFooY29udHJhY3QuZGF0YSkgYXMgc3RyaW5nLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiRmluZCBMYXJnZXN0IFByaW1lIEZhY3RvclwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGxhcmdlc3RQcmltZUZhY3Rvcihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlVuaXF1ZSBQYXRocyBpbiBhIEdyaWQgSVwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHVuaXF1ZVBhdGhzKGNyZWF0ZUdyaWQoY29udHJhY3QuZGF0YVswXSwgY29udHJhY3QuZGF0YVsxXSkpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiVW5pcXVlIFBhdGhzIGluIGEgR3JpZCBJSVwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHVuaXF1ZVBhdGhzKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLnN0YXJ0c1dpdGgoXCJUb3RhbCBXYXlzIHRvIFN1bVwiKSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChjb250cmFjdC50eXBlLmVuZHNXaXRoKFwiSUlcIikgPyB0b3RhbFN1bXMyKGNvbnRyYWN0LmRhdGEpIDogdG90YWxTdW1zKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLmluY2x1ZGVzKFwiQWxnb3JpdGhtaWMgU3RvY2sgVHJhZGVyXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gY29udHJhY3QudHlwZS5zcGxpdChcIiBcIilbM107XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiSVwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHN0b2Nrcy5zdG9jazEoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiSUlcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0MiA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoc3RvY2tzLnN0b2NrMihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dDIgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0Mik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgY2FzZSBcIklJSVwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQzID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChzdG9ja3Muc3RvY2szKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0MyA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiSVZcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0NCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoc3RvY2tzLnN0b2NrNChjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dDQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0NCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUuc3RhcnRzV2l0aChcIkVuY3J5cHRpb24gSUlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQodmlnbmVyZShjb250cmFjdC5kYXRhWzBdLCBjb250cmFjdC5kYXRhWzFdKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIkdlbmVyYXRlIElQIEFkZHJlc3Nlc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGdlbmVyYXRlSVBBZGRyZXNzZXMoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJNZXJnZSBPdmVybGFwcGluZyBJbnRlcnZhbHNcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChtZXJnZUludGVydmFsKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiTWluaW11bSBQYXRoIFN1bSBpbiBhIFRyaWFuZ2xlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQodHJpYW5nbGUoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJTYW5pdGl6ZSBQYXJlbnRoZXNlcyBpbiBFeHByZXNzaW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoc2FuaXRpemVQYXJlbnRoZXNlcyhjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5zdGFydHNXaXRoKFwiRW5jcnlwdGlvbiBJXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGNhZXNhcihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5zdGFydHNXaXRoKFwiQ29tcHJlc3Npb24gSUlJXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGNvbXByZXNzTFooY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJGaW5kIEFsbCBWYWxpZCBNYXRoIEV4cHJlc3Npb25zXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoZmluZFZhbGlkKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiSGFtbWluZ0NvZGVzOiBJbnRlZ2VyIHRvIEVuY29kZWQgQmluYXJ5XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoSGFtbWluZ0NvZGVzX3RvX2VuY29kZWQoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJIYW1taW5nQ29kZXM6IEVuY29kZWQgQmluYXJ5IHRvIEludGVnZXJcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChIYW1taW5nQ29kZXNfdG9faW50KGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiU2hvcnRlc3QgUGF0aCBpbiBhIEdyaWRcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChTaG9ydGVzdFBhdGgoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJTcGlyYWxpemUgTWF0cml4XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoU3BpcmFsaXplTWF0cml4KGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufSJdfQ==