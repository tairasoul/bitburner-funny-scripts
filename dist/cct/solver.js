import { decompressLZ } from "/cct/decompressLZ";
import { getCCT } from "/cct/findCct";
import { minJumps } from "/cct/jump";
import { largestPrimeFactor } from "/cct/largestPrimeFactor";
import * as stocks from "/cct/stockTrader";
import { maxSubarraySum } from "/cct/maxSubarraySum";
import { sanitizeParentheses } from "/cct/parenthesesSanitize";
import { RLE } from "/cct/RLE";
import { twoColorGraph } from "/cct/twoColourGraph";
import { uniquePaths } from "/cct/uniquePaths";
import { totalSums, totalSums2 } from "/cct/totalSums";
import { vignere } from "/cct/vignere";
import { generateIPAddresses } from "/cct/generateIPAddresses";
import { mergeInterval } from "/cct/mergeInterval";
import { triangle } from "/cct/triangle";
import { caesar } from "/cct/caesar";
import { compressLZ } from "/cct/compressLZ";
import { findValid } from "/cct/findvalid";
import { HammingCodes_to_int } from "/cct/hammingcodes-encoded-to-int";
import { HammingCodes_to_encoded } from "/cct/hammingcodes-int-to-encoded";
import { SpiralizeMatrix } from "/cct/spiralize_matrix";
import { ShortestPath } from "/cct/shortest_path";
import Logs from "/general/logs";
function getAll(ns, contract, host) {
    return {
        type: ns.codingcontract.getContractType(contract, host),
        data: ns.codingcontract.getData(contract, host),
        description: ns.codingcontract.getDescription(contract, host)
    };
}
function createGrid(numRows, numCols) {
    const array = [];
    for (let i = 0; i < numRows; i++) {
        array.push(new Array(numCols).fill(0));
    }
    return array;
}
export async function solveCCT(ns) {
    const logger = new Logs(ns, "CCTSolver");
    ns.disableLog("ALL");
    const cct = getCCT(ns);
    if (cct != null) {
        const contract = getAll(ns, cct.cct, cct.hostname);
        if (contract.type.includes("Array Jumping Game")) {
            const output = ns.codingcontract.attempt(minJumps(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Subarray with Maximum Sum") {
            const output = ns.codingcontract.attempt(maxSubarraySum(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Proper 2-Coloring of a Graph") {
            const output = ns.codingcontract.attempt(twoColorGraph(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Compression I")) {
            const output = ns.codingcontract.attempt(RLE(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Compression II: LZ Decompression") {
            const output = ns.codingcontract.attempt(decompressLZ(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Find Largest Prime Factor") {
            const output = ns.codingcontract.attempt(largestPrimeFactor(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Unique Paths in a Grid I") {
            const output = ns.codingcontract.attempt(uniquePaths(createGrid(contract.data[0], contract.data[1])), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Unique Paths in a Grid II") {
            const output = ns.codingcontract.attempt(uniquePaths(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Total Ways to Sum")) {
            const output = ns.codingcontract.attempt(contract.type.endsWith("II") ? totalSums2(contract.data) : totalSums(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.includes("Algorithmic Stock Trader")) {
            const type = contract.type.split(" ")[3];
            switch (type) {
                case "I":
                    const output = ns.codingcontract.attempt(stocks.stock1(contract.data), cct.cct, cct.hostname);
                    if (output == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output);
                    }
                    return true;
                case "II":
                    const output2 = ns.codingcontract.attempt(stocks.stock2(contract.data), cct.cct, cct.hostname);
                    if (output2 == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output2);
                    }
                    return true;
                case "III":
                    const output3 = ns.codingcontract.attempt(stocks.stock3(contract.data), cct.cct, cct.hostname);
                    if (output3 == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output3);
                    }
                    return true;
                case "IV":
                    const output4 = ns.codingcontract.attempt(stocks.stock4(contract.data), cct.cct, cct.hostname);
                    if (output4 == "") {
                        await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
                    }
                    else {
                        await logger.Log(output4);
                    }
                    return true;
            }
        }
        if (contract.type.startsWith("Encryption II")) {
            const output = ns.codingcontract.attempt(vignere(contract.data[0], contract.data[1]), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Generate IP Addresses") {
            const output = ns.codingcontract.attempt(generateIPAddresses(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Merge Overlapping Intervals") {
            const output = ns.codingcontract.attempt(mergeInterval(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Minimum Path Sum in a Triangle") {
            const output = ns.codingcontract.attempt(triangle(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Sanitize Parentheses in Expression") {
            const output = ns.codingcontract.attempt(sanitizeParentheses(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Encryption I")) {
            const output = ns.codingcontract.attempt(caesar(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type.startsWith("Compression III")) {
            const output = ns.codingcontract.attempt(compressLZ(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Find All Valid Math Expressions") {
            const output = ns.codingcontract.attempt(findValid(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "HammingCodes: Integer to Encoded Binary") {
            const output = ns.codingcontract.attempt(HammingCodes_to_encoded(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "HammingCodes: Encoded Binary to Integer") {
            const output = ns.codingcontract.attempt(HammingCodes_to_int(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Shortest Path in a Grid") {
            const output = ns.codingcontract.attempt(ShortestPath(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
        if (contract.type == "Spiralize Matrix") {
            const output = ns.codingcontract.attempt(SpiralizeMatrix(contract.data), cct.cct, cct.hostname);
            if (output == "") {
                await logger.Log(`Failed to solve contract of type ${contract.type} ${cct.cct} on ${cct.hostname}.`);
            }
            else {
                await logger.Log(output);
            }
            return true;
        }
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29sdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NjdC9zb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDdEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNyQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM3RCxPQUFPLEtBQUssTUFBTSxNQUFNLGtCQUFrQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMvRCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQy9CLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDL0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDckMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsbUJB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QUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0YsSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO2dCQUNkLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ3hHO2lCQUNJO2dCQUNELE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM1QjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksa0JBQWtCLEVBQUU7WUFDckMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRyxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7YUFDeEc7aUJBQ0k7Z0JBQ0QsTUFBTSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxJQUFJLENBQUM7U0FDZjtLQUNKO0lBQ0QsT0FBTyxLQUFLLENBQUE7QUFDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5TIH0gZnJvbSBcIkBuc1wiO1xuaW1wb3J0IHsgZGVjb21wcmVzc0xaIH0gZnJvbSBcIi9jY3QvZGVjb21wcmVzc0xaXCI7XG5pbXBvcnQgeyBnZXRDQ1QgfSBmcm9tIFwiL2NjdC9maW5kQ2N0XCI7XG5pbXBvcnQgeyBtaW5KdW1wcyB9IGZyb20gXCIvY2N0L2p1bXBcIjtcbmltcG9ydCB7IGxhcmdlc3RQcmltZUZhY3RvciB9IGZyb20gXCIvY2N0L2xhcmdlc3RQcmltZUZhY3RvclwiO1xuaW1wb3J0ICogYXMgc3RvY2tzIGZyb20gXCIvY2N0L3N0b2NrVHJhZGVyXCI7XG5pbXBvcnQgeyBtYXhTdWJhcnJheVN1bSB9IGZyb20gXCIvY2N0L21heFN1YmFycmF5U3VtXCI7XG5pbXBvcnQgeyBzYW5pdGl6ZVBhcmVudGhlc2VzIH0gZnJvbSBcIi9jY3QvcGFyZW50aGVzZXNTYW5pdGl6ZVwiO1xuaW1wb3J0IHsgUkxFIH0gZnJvbSBcIi9jY3QvUkxFXCI7XG5pbXBvcnQgeyB0d29Db2xvckdyYXBoIH0gZnJvbSBcIi9jY3QvdHdvQ29sb3VyR3JhcGhcIjtcbmltcG9ydCB7IHVuaXF1ZVBhdGhzIH0gZnJvbSBcIi9jY3QvdW5pcXVlUGF0aHNcIjtcbmltcG9ydCB7IHRvdGFsU3VtcywgdG90YWxTdW1zMiB9IGZyb20gXCIvY2N0L3RvdGFsU3Vtc1wiO1xuaW1wb3J0IHsgdmlnbmVyZSB9IGZyb20gXCIvY2N0L3ZpZ25lcmVcIjtcbmltcG9ydCB7IGdlbmVyYXRlSVBBZGRyZXNzZXMgfSBmcm9tIFwiL2NjdC9nZW5lcmF0ZUlQQWRkcmVzc2VzXCI7XG5pbXBvcnQgeyBtZXJnZUludGVydmFsIH0gZnJvbSBcIi9jY3QvbWVyZ2VJbnRlcnZhbFwiO1xuaW1wb3J0IHsgdHJpYW5nbGUgfSBmcm9tIFwiL2NjdC90cmlhbmdsZVwiO1xuaW1wb3J0IHsgY2Flc2FyIH0gZnJvbSBcIi9jY3QvY2Flc2FyXCI7XG5pbXBvcnQgeyBjb21wcmVzc0xaIH0gZnJvbSBcIi9jY3QvY29tcHJlc3NMWlwiO1xuaW1wb3J0IHsgZmluZFZhbGlkIH0gZnJvbSBcIi9jY3QvZmluZHZhbGlkXCI7XG5pbXBvcnQgeyBIYW1taW5nQ29kZXNfdG9faW50IH0gZnJvbSBcIi9jY3QvaGFtbWluZ2NvZGVzLWVuY29kZWQtdG8taW50XCI7XG5pbXBvcnQgeyBIYW1taW5nQ29kZXNfdG9fZW5jb2RlZCB9IGZyb20gXCIvY2N0L2hhbW1pbmdjb2Rlcy1pbnQtdG8tZW5jb2RlZFwiXG5pbXBvcnQgeyBTcGlyYWxpemVNYXRyaXggfSBmcm9tIFwiL2NjdC9zcGlyYWxpemVfbWF0cml4XCI7XG5pbXBvcnQgeyBTaG9ydGVzdFBhdGggfSBmcm9tIFwiL2NjdC9zaG9ydGVzdF9wYXRoXCI7XG5pbXBvcnQgTG9ncyBmcm9tIFwiL2dlbmVyYWwvbG9nc1wiO1xuXG5mdW5jdGlvbiBnZXRBbGwobnM6IE5TLCBjb250cmFjdDogc3RyaW5nLCBob3N0OiBzdHJpbmcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBucy5jb2Rpbmdjb250cmFjdC5nZXRDb250cmFjdFR5cGUoY29udHJhY3QsIGhvc3QpLFxuICAgICAgICBkYXRhOiBucy5jb2Rpbmdjb250cmFjdC5nZXREYXRhKGNvbnRyYWN0LCBob3N0KSxcbiAgICAgICAgZGVzY3JpcHRpb246IG5zLmNvZGluZ2NvbnRyYWN0LmdldERlc2NyaXB0aW9uKGNvbnRyYWN0LCBob3N0KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JpZChudW1Sb3dzOiBudW1iZXIsIG51bUNvbHM6IG51bWJlcikge1xuICAgIGNvbnN0IGFycmF5OiBudW1iZXJbXVtdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVJvd3M7IGkrKykge1xuICAgICAgICBhcnJheS5wdXNoKG5ldyBBcnJheShudW1Db2xzKS5maWxsKDApKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc29sdmVDQ1QobnM6IE5TKSB7XG4gICAgY29uc3QgbG9nZ2VyID0gbmV3IExvZ3MobnMsIFwiQ0NUU29sdmVyXCIpO1xuICAgIG5zLmRpc2FibGVMb2coXCJBTExcIik7XG4gICAgY29uc3QgY2N0ID0gZ2V0Q0NUKG5zKTtcbiAgICBpZiAoY2N0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgY29udHJhY3QgPSBnZXRBbGwobnMsIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLmluY2x1ZGVzKFwiQXJyYXkgSnVtcGluZyBHYW1lXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KG1pbkp1bXBzKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiU3ViYXJyYXkgd2l0aCBNYXhpbXVtIFN1bVwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KG1heFN1YmFycmF5U3VtKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiUHJvcGVyIDItQ29sb3Jpbmcgb2YgYSBHcmFwaFwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHR3b0NvbG9yR3JhcGgoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUuc3RhcnRzV2l0aChcIkNvbXByZXNzaW9uIElcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoUkxFKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiQ29tcHJlc3Npb24gSUk6IExaIERlY29tcHJlc3Npb25cIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChkZWNvbXByZXNzTFooY29udHJhY3QuZGF0YSkgYXMgc3RyaW5nLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiRmluZCBMYXJnZXN0IFByaW1lIEZhY3RvclwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGxhcmdlc3RQcmltZUZhY3Rvcihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIlVuaXF1ZSBQYXRocyBpbiBhIEdyaWQgSVwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHVuaXF1ZVBhdGhzKGNyZWF0ZUdyaWQoY29udHJhY3QuZGF0YVswXSwgY29udHJhY3QuZGF0YVsxXSkpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiVW5pcXVlIFBhdGhzIGluIGEgR3JpZCBJSVwiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHVuaXF1ZVBhdGhzKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLnN0YXJ0c1dpdGgoXCJUb3RhbCBXYXlzIHRvIFN1bVwiKSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChjb250cmFjdC50eXBlLmVuZHNXaXRoKFwiSUlcIikgPyB0b3RhbFN1bXMyKGNvbnRyYWN0LmRhdGEpIDogdG90YWxTdW1zKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlLmluY2x1ZGVzKFwiQWxnb3JpdGhtaWMgU3RvY2sgVHJhZGVyXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gY29udHJhY3QudHlwZS5zcGxpdChcIiBcIilbM107XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiSVwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KHN0b2Nrcy5zdG9jazEoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiSUlcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0MiA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoc3RvY2tzLnN0b2NrMihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dDIgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0Mik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgY2FzZSBcIklJSVwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQzID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChzdG9ja3Muc3RvY2szKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0MyA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiSVZcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0NCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoc3RvY2tzLnN0b2NrNChjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dDQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0NCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUuc3RhcnRzV2l0aChcIkVuY3J5cHRpb24gSUlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQodmlnbmVyZShjb250cmFjdC5kYXRhWzBdLCBjb250cmFjdC5kYXRhWzFdKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZSA9PSBcIkdlbmVyYXRlIElQIEFkZHJlc3Nlc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGdlbmVyYXRlSVBBZGRyZXNzZXMoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJNZXJnZSBPdmVybGFwcGluZyBJbnRlcnZhbHNcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChtZXJnZUludGVydmFsKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiTWluaW11bSBQYXRoIFN1bSBpbiBhIFRyaWFuZ2xlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQodHJpYW5nbGUoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJTYW5pdGl6ZSBQYXJlbnRoZXNlcyBpbiBFeHByZXNzaW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoc2FuaXRpemVQYXJlbnRoZXNlcyhjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5zdGFydHNXaXRoKFwiRW5jcnlwdGlvbiBJXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGNhZXNhcihjb250cmFjdC5kYXRhKSwgY2N0LmNjdCwgY2N0Lmhvc3RuYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2coYEZhaWxlZCB0byBzb2x2ZSBjb250cmFjdCBvZiB0eXBlICR7Y29udHJhY3QudHlwZX0gJHtjY3QuY2N0fSBvbiAke2NjdC5ob3N0bmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKG91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJhY3QudHlwZS5zdGFydHNXaXRoKFwiQ29tcHJlc3Npb24gSUlJXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBucy5jb2Rpbmdjb250cmFjdC5hdHRlbXB0KGNvbXByZXNzTFooY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJGaW5kIEFsbCBWYWxpZCBNYXRoIEV4cHJlc3Npb25zXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoZmluZFZhbGlkKGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiSGFtbWluZ0NvZGVzOiBJbnRlZ2VyIHRvIEVuY29kZWQgQmluYXJ5XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoSGFtbWluZ0NvZGVzX3RvX2VuY29kZWQoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJIYW1taW5nQ29kZXM6IEVuY29kZWQgQmluYXJ5IHRvIEludGVnZXJcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChIYW1taW5nQ29kZXNfdG9faW50KGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cmFjdC50eXBlID09IFwiU2hvcnRlc3QgUGF0aCBpbiBhIEdyaWRcIikge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gbnMuY29kaW5nY29udHJhY3QuYXR0ZW1wdChTaG9ydGVzdFBhdGgoY29udHJhY3QuZGF0YSksIGNjdC5jY3QsIGNjdC5ob3N0bmFtZSk7XG4gICAgICAgICAgICBpZiAob3V0cHV0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIuTG9nKGBGYWlsZWQgdG8gc29sdmUgY29udHJhY3Qgb2YgdHlwZSAke2NvbnRyYWN0LnR5cGV9ICR7Y2N0LmNjdH0gb24gJHtjY3QuaG9zdG5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyYWN0LnR5cGUgPT0gXCJTcGlyYWxpemUgTWF0cml4XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5zLmNvZGluZ2NvbnRyYWN0LmF0dGVtcHQoU3BpcmFsaXplTWF0cml4KGNvbnRyYWN0LmRhdGEpLCBjY3QuY2N0LCBjY3QuaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLkxvZyhgRmFpbGVkIHRvIHNvbHZlIGNvbnRyYWN0IG9mIHR5cGUgJHtjb250cmFjdC50eXBlfSAke2NjdC5jY3R9IG9uICR7Y2N0Lmhvc3RuYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5Mb2cob3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufSJdfQ==