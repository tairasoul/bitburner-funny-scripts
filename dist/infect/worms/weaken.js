import Multiport from "/general/multiport";
export async function main(ns) {
    const returnComms = new Multiport(ns, { ports: JSON.parse(ns.args[0]) });
    const data = JSON.parse(ns.args[1]);
    const port = ns.getPortHandle(data.startPort);
    await port.nextWrite();
    await ns.weaken(data.server);
    returnComms.write(JSON.stringify(data));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vha2VuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2luZmVjdC93b3Jtcy93ZWFrZW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxTQUFTLE1BQU0sb0JBQW9CLENBQUM7QUFFM0MsTUFBTSxDQUFDLEtBQUssVUFBVSxJQUFJLENBQUMsRUFBUztJQUNoQyxNQUFNLFdBQVcsR0FBRyxJQUFJLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBVyxDQUFDLEVBQUMsQ0FBQyxDQUFBO0lBQ2hGLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQVcsQ0FBYSxDQUFDO0lBQzFELE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzlDLE1BQU0sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3ZCLE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0IsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDNUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBucyBmcm9tIFwiQG5zXCI7XG5pbXBvcnQgeyBXb3JtRGF0YSB9IGZyb20gXCIvaW5mZWN0L3dvcm1zL3R5cGVzXCI7XG5pbXBvcnQgTXVsdGlwb3J0IGZyb20gXCIvZ2VuZXJhbC9tdWx0aXBvcnRcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1haW4obnM6IG5zLk5TKSB7XG4gICAgY29uc3QgcmV0dXJuQ29tbXMgPSBuZXcgTXVsdGlwb3J0KG5zLCB7cG9ydHM6IEpTT04ucGFyc2UobnMuYXJnc1swXSBhcyBzdHJpbmcpfSlcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShucy5hcmdzWzFdIGFzIHN0cmluZykgYXMgV29ybURhdGE7XG4gICAgY29uc3QgcG9ydCA9IG5zLmdldFBvcnRIYW5kbGUoZGF0YS5zdGFydFBvcnQpO1xuICAgIGF3YWl0IHBvcnQubmV4dFdyaXRlKCk7XG4gICAgYXdhaXQgbnMud2Vha2VuKGRhdGEuc2VydmVyKTtcbiAgICByZXR1cm5Db21tcy53cml0ZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG59Il19