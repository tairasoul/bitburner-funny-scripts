export async function main(ns) {
    const port = ns.args[0];
    const handle = ns.getPortHandle(port);
    await ns.sleep(10);
    const operation = JSON.parse(handle.read());
    switch (operation.op) {
        case "read":
            handle.write(ns.read(operation.path));
            break;
        case "write":
            ns.write(operation.path, operation.data, operation.mode);
            handle.write(`wrote data to ${operation.path}`);
            break;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybS1vcGVyYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZ2VuZXJhbC9yZW1vdGUtZmlsZS9wZXJmb3JtLW9wZXJhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFZQSxNQUFNLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxFQUFTO0lBQ2hDLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFXLENBQUM7SUFDbEMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQWtCLENBQUM7SUFDN0QsUUFBUSxTQUFTLENBQUMsRUFBRSxFQUFFO1FBQ2xCLEtBQUssTUFBTTtZQUNQLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN0QyxNQUFNO1FBQ1YsS0FBSyxPQUFPO1lBQ1IsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pELE1BQU0sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ2hELE1BQU07S0FDYjtBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbnMgZnJvbSBcIkBuc1wiO1xuXG5leHBvcnQgdHlwZSBPcGVyYXRpb25EYXRhID0ge1xuICAgIG9wOiBcInJlYWRcIjtcbiAgICBwYXRoOiBzdHJpbmc7XG59IHwge1xuICAgIG9wOiBcIndyaXRlXCI7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGRhdGE6IHN0cmluZztcbiAgICBtb2RlPzogXCJ3XCIgfCBcImFcIlxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFpbihuczogbnMuTlMpIHtcbiAgICBjb25zdCBwb3J0ID0gbnMuYXJnc1swXSBhcyBudW1iZXI7XG4gICAgY29uc3QgaGFuZGxlID0gbnMuZ2V0UG9ydEhhbmRsZShwb3J0KTtcbiAgICBhd2FpdCBucy5zbGVlcCgxMCk7XG4gICAgY29uc3Qgb3BlcmF0aW9uID0gSlNPTi5wYXJzZShoYW5kbGUucmVhZCgpKSBhcyBPcGVyYXRpb25EYXRhO1xuICAgIHN3aXRjaCAob3BlcmF0aW9uLm9wKSB7XG4gICAgICAgIGNhc2UgXCJyZWFkXCI6XG4gICAgICAgICAgICBoYW5kbGUud3JpdGUobnMucmVhZChvcGVyYXRpb24ucGF0aCkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ3cml0ZVwiOlxuICAgICAgICAgICAgbnMud3JpdGUob3BlcmF0aW9uLnBhdGgsIG9wZXJhdGlvbi5kYXRhLCBvcGVyYXRpb24ubW9kZSk7XG4gICAgICAgICAgICBoYW5kbGUud3JpdGUoYHdyb3RlIGRhdGEgdG8gJHtvcGVyYXRpb24ucGF0aH1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn0iXX0=