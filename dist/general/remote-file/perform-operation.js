export async function main(ns) {
    const port = ns.args[0];
    const handle = ns.getPortHandle(port);
    const operation = JSON.parse(handle.read());
    switch (operation.op) {
        case "read":
            handle.write(ns.read(operation.path));
            break;
        case "write":
            ns.write(operation.path, operation.data, operation.mode);
            handle.write(`wrote data to ${operation.path}`);
            break;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybS1vcGVyYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZ2VuZXJhbC9yZW1vdGUtZmlsZS9wZXJmb3JtLW9wZXJhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFZQSxNQUFNLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxFQUFTO0lBQ2hDLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFXLENBQUM7SUFDbEMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBa0IsQ0FBQztJQUM3RCxRQUFRLFNBQVMsQ0FBQyxFQUFFLEVBQUU7UUFDbEIsS0FBSyxNQUFNO1lBQ1AsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLE1BQU07UUFDVixLQUFLLE9BQU87WUFDUixFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekQsTUFBTSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDaEQsTUFBTTtLQUNiO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBucyBmcm9tIFwiQG5zXCI7XG5cbmV4cG9ydCB0eXBlIE9wZXJhdGlvbkRhdGEgPSB7XG4gICAgb3A6IFwicmVhZFwiO1xuICAgIHBhdGg6IHN0cmluZztcbn0gfCB7XG4gICAgb3A6IFwid3JpdGVcIjtcbiAgICBwYXRoOiBzdHJpbmc7XG4gICAgZGF0YTogc3RyaW5nO1xuICAgIG1vZGU/OiBcIndcIiB8IFwiYVwiXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWluKG5zOiBucy5OUykge1xuICAgIGNvbnN0IHBvcnQgPSBucy5hcmdzWzBdIGFzIG51bWJlcjtcbiAgICBjb25zdCBoYW5kbGUgPSBucy5nZXRQb3J0SGFuZGxlKHBvcnQpO1xuICAgIGNvbnN0IG9wZXJhdGlvbiA9IEpTT04ucGFyc2UoaGFuZGxlLnJlYWQoKSkgYXMgT3BlcmF0aW9uRGF0YTtcbiAgICBzd2l0Y2ggKG9wZXJhdGlvbi5vcCkge1xuICAgICAgICBjYXNlIFwicmVhZFwiOlxuICAgICAgICAgICAgaGFuZGxlLndyaXRlKG5zLnJlYWQob3BlcmF0aW9uLnBhdGgpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwid3JpdGVcIjpcbiAgICAgICAgICAgIG5zLndyaXRlKG9wZXJhdGlvbi5wYXRoLCBvcGVyYXRpb24uZGF0YSwgb3BlcmF0aW9uLm1vZGUpO1xuICAgICAgICAgICAgaGFuZGxlLndyaXRlKGB3cm90ZSBkYXRhIHRvICR7b3BlcmF0aW9uLnBhdGh9YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59Il19